     1                                  ; ipl.asm (Day 3 启动扇区专用)
     2                                  ; TAB=4
     3                                  
     4                                  BITS 16
     5                                  ORG  0x7c00
     6                                  
     7                                  ; ---------------------------------
     8                                  ; FAT12 软盘头部 (BPB)
     9                                  ; ---------------------------------
    10 00000000 EB4E                        JMP entry
    11 00000002 90                          DB 0x90
    12 00000003 48454C4C4F49504C            DB "HELLOIPL" ; 厂商名 (8 字节)
    13 0000000B 0002010100                  DB 0x00, 0x02, 0x01, 0x01, 0x00
    14 00000010 02E000400BF00900            DB 0x02, 0xe0, 0x00, 0x40, 0x0b, 0xf0, 0x09, 0x00
    15 00000018 1200020000000000            DB 0x12, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
    16 00000020 400B0000000029FF            DB 0x40, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x29, 0xff
    17 00000028 FFFFFF48454C4C4F2D-         DB 0xff, 0xff, 0xff, "HELLO-OS   " ; 卷标 (11 字节)
    17 00000031 4F53202020         
    18 00000036 4641543132202020            DB "FAT12   " ; 文件系统类型 (8 字节)
    19 0000003E 0000                        DB 0x00, 0x00
    20                                  
    21 00000040 <res 10h>                   RESB 16     ; 保留 16 字节
    21          ******************       warning: uninitialized space declared in .text section: zeroing [-w+zeroing]
    22                                  
    23                                  ; ---------------------------------
    24                                  ; 程序核心
    25                                  ; ---------------------------------
    26                                  entry:
    27 00000050 B80000                      MOV AX, 0
    28 00000053 8ED0                        MOV SS, AX
    29 00000055 BC007C                      MOV SP, 0x7c00
    30 00000058 8ED8                        MOV DS, AX
    31 0000005A 8EC0                        MOV ES, AX
    32                                  
    33 0000005C BE[7400]                    MOV SI, msg
    34                                  putloop:
    35 0000005F 8A04                        MOV AL, [SI]
    36 00000061 83C601                      ADD SI, 1
    37 00000064 3C00                        CMP AL, 0
    38 00000066 7409                        JE  fin
    39 00000068 B40E                        MOV AH, 0x0e
    40 0000006A BB0F00                      MOV BX, 15
    41 0000006D CD10                        INT 0x10
    42 0000006F EBEE                        JMP putloop
    43                                  fin:
    44 00000071 F4                          HLT
    45 00000072 EBFD                        JMP fin
    46                                  
    47                                  msg:
    48 00000074 0A0A                        DB 0x0a, 0x0a
    49 00000076 68656C6C6F2C20776F-         DB "hello, world"
    49 0000007F 726C64             
    50 00000082 0A                          DB 0x0a
    51 00000083 00                          DB 0
    52                                  
    53                                  ; ---------------------------------
    54                                  ; 填充 & 魔法数字
    55                                  ; ---------------------------------
    56                                      ; 自动计算填充，确保 55 AA 在第 511, 512 字节
    57 00000084 <res 17Ah>                  RESB 510 - ($ - $$) 
    57          ******************       warning: uninitialized space declared in .text section: zeroing [-w+zeroing]
    58                                  
    59 000001FE 55AA                        DB 0x55, 0xaa
    60                                  ; ---------------------------------
    61                                  ; 启动扇区 (512 字节) 结束
    62                                  ; (后面所有的 FAT 表和 resb 都删掉了)
    63                                  ; ---------------------------------
